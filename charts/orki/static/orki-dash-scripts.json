{"annotations":{"list":[{"builtIn":1,"datasource":{"type":"grafana","uid":"-- Grafana --"},"enable":true,"hide":true,"iconColor":"rgba(0, 211, 255, 1)","name":"Annotations & Alerts","type":"dashboard"}]},"editable":true,"fiscalYearStartMonth":0,"graphTooltip":1,"id":1,"links":[],"panels":[{"datasource":{"type":"prometheus","uid":"${_datasource}"},"fieldConfig":{"defaults":{"color":{"mode":"continuous-GrYlRd","seriesBy":"max"},"fieldMinMax":false,"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"red","value":1000}]},"unit":"opm"},"overrides":[]},"gridPos":{"h":7,"w":8,"x":0,"y":0},"id":7,"options":{"colorMode":"value","graphMode":"area","justifyMode":"auto","orientation":"auto","percentChangeColorMode":"standard","reduceOptions":{"calcs":["mean"],"fields":"","values":false},"showPercentChange":false,"textMode":"auto","wideLayout":true},"pluginVersion":"11.3.0+security-01","targets":[{"datasource":{"type":"prometheus","uid":"${_datasource}"},"disableTextWrap":false,"editorMode":"code","exemplar":false,"expr":"sum(increase(orki_core_script_execute_milliseconds_count{codeName=~\"${_codeName}\"}[${_timeGroup}])) by ()","fullMetaSearch":false,"includeNullMetadata":true,"instant":false,"legendFormat":"Total","range":true,"refId":"A","useBackend":false},{"datasource":{"type":"prometheus","uid":"${_datasource}"},"editorMode":"code","expr":"sum(increase(orki_core_script_api_execute_milliseconds_count{codeName=~\"${_codeName}\",statusCode=~\"${_statusCode}\"}[${_timeGroup}])) by ()","hide":false,"instant":false,"legendFormat":"Api - scripts","range":true,"refId":"B"}],"title":"Quantidade de status code","type":"stat"},{"datasource":{"type":"prometheus","uid":"${_datasource}"},"fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"hideFrom":{"legend":false,"tooltip":false,"viz":false}},"mappings":[],"unit":"ms"},"overrides":[]},"gridPos":{"h":7,"w":9,"x":8,"y":0},"id":4,"options":{"legend":{"displayMode":"list","placement":"right","showLegend":true,"values":["value"]},"pieType":"pie","reduceOptions":{"calcs":["mean"],"fields":"","values":false},"tooltip":{"mode":"single","sort":"none"}},"pluginVersion":"11.3.0+security-01","targets":[{"datasource":{"type":"prometheus","uid":"${_datasource}"},"disableTextWrap":false,"editorMode":"code","expr":"avg(orki_core_script_execute_milliseconds_gauge{codeName=~\"${_codeName:regex}\"}) by (codeName)","fullMetaSearch":false,"includeNullMetadata":true,"legendFormat":"__auto","range":true,"refId":"A","useBackend":false}],"title":"Tempo médio por script","type":"piechart"},{"datasource":{"type":"prometheus","uid":"${_datasource}"},"fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"fillOpacity":80,"gradientMode":"none","hideFrom":{"legend":false,"tooltip":false,"viz":false},"lineWidth":1,"stacking":{"group":"A","mode":"none"}},"fieldMinMax":false,"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"red","value":80}]},"unit":"ms"},"overrides":[]},"gridPos":{"h":7,"w":7,"x":17,"y":0},"id":2,"options":{"legend":{"calcs":[],"displayMode":"list","placement":"bottom","showLegend":true},"tooltip":{"mode":"single","sort":"desc"}},"pluginVersion":"11.3.0+security-01","targets":[{"datasource":{"type":"prometheus","uid":"${_datasource}"},"disableTextWrap":false,"editorMode":"code","exemplar":false,"expr":"histogram_quantile(0.99, avg by(le) (orki_core_script_execute_milliseconds_bucket{codeName=~\"${_codeName:regex}\"}))\n","format":"time_series","fullMetaSearch":false,"includeNullMetadata":true,"instant":false,"legendFormat":"Quantidade de chamadas","range":true,"refId":"A","useBackend":false}],"title":"Ditribuição de duração das execuções","type":"histogram"},{"datasource":{"type":"prometheus","uid":"${_datasource}"},"fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"red","value":10}]},"unit":"none"},"overrides":[]},"gridPos":{"h":14,"w":8,"x":0,"y":7},"id":8,"options":{"displayMode":"lcd","legend":{"calcs":[],"displayMode":"list","placement":"bottom","showLegend":false},"maxVizHeight":300,"minVizHeight":16,"minVizWidth":8,"namePlacement":"top","orientation":"horizontal","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"showUnfilled":true,"sizing":"auto","valueMode":"color"},"pluginVersion":"11.3.0+security-01","targets":[{"datasource":{"type":"prometheus","uid":"${_datasource}"},"disableTextWrap":false,"editorMode":"code","expr":"sum(orki_core_script_execute_error_counter{codeName=~\"${_codeName}\"}) by (errorCode)","fullMetaSearch":false,"includeNullMetadata":true,"legendFormat":"__auto","range":true,"refId":"A","useBackend":false}],"title":"Relação de erros no periodo","type":"bargauge"},{"datasource":{"type":"prometheus","uid":"${_datasource}"},"fieldConfig":{"defaults":{"color":{"mode":"continuous-GrYlRd","seriesBy":"max"},"custom":{"axisBorderShow":false,"axisCenteredZero":false,"axisColorMode":"text","axisLabel":"","axisPlacement":"right","barAlignment":0,"barWidthFactor":0.6,"drawStyle":"line","fillOpacity":0,"gradientMode":"none","hideFrom":{"legend":false,"tooltip":false,"viz":false},"insertNulls":false,"lineInterpolation":"smooth","lineStyle":{"fill":"solid"},"lineWidth":1,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"never","spanNulls":false,"stacking":{"group":"A","mode":"none"},"thresholdsStyle":{"mode":"off"}},"fieldMinMax":false,"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"red","value":1000}]},"unit":"ms"},"overrides":[]},"gridPos":{"h":7,"w":9,"x":8,"y":7},"id":3,"options":{"legend":{"calcs":["mean"],"displayMode":"table","placement":"bottom","showLegend":false,"sortBy":"Mean","sortDesc":true},"tooltip":{"mode":"multi","sort":"desc"}},"pluginVersion":"11.3.0+security-01","targets":[{"datasource":{"type":"prometheus","uid":"${_datasource}"},"disableTextWrap":false,"editorMode":"code","exemplar":false,"expr":"avg(orki_core_script_execute_milliseconds_gauge{codeName=~\"${_codeName:regex}\"}) by (codeName)","fullMetaSearch":false,"includeNullMetadata":true,"instant":false,"legendFormat":"__auto","range":true,"refId":"A","useBackend":false}],"title":"Tempo de execução de scripts ao longo do tempo","type":"timeseries"},{"datasource":{"type":"prometheus","uid":"${_datasource}"},"fieldConfig":{"defaults":{"color":{"mode":"continuous-GrYlRd","seriesBy":"max"},"custom":{"axisBorderShow":false,"axisCenteredZero":false,"axisColorMode":"text","axisLabel":"","axisPlacement":"right","barAlignment":0,"barWidthFactor":0.6,"drawStyle":"line","fillOpacity":0,"gradientMode":"none","hideFrom":{"legend":false,"tooltip":false,"viz":false},"insertNulls":false,"lineInterpolation":"smooth","lineStyle":{"fill":"solid"},"lineWidth":1,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"never","spanNulls":false,"stacking":{"group":"A","mode":"none"},"thresholdsStyle":{"mode":"off"}},"fieldMinMax":false,"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"red","value":1000}]},"unit":"opm"},"overrides":[]},"gridPos":{"h":7,"w":7,"x":17,"y":7},"id":6,"options":{"legend":{"calcs":["mean"],"displayMode":"table","placement":"bottom","showLegend":false,"sortBy":"Mean","sortDesc":true},"tooltip":{"mode":"multi","sort":"desc"}},"pluginVersion":"11.3.0+security-01","targets":[{"datasource":{"type":"prometheus","uid":"${_datasource}"},"disableTextWrap":false,"editorMode":"code","exemplar":false,"expr":"sum(increase(orki_core_script_api_execute_milliseconds_count{codeName=~\"${_codeName}\",statusCode=~\"${_statusCode}\"}[${_timeGroup}])) by (statusCode)","fullMetaSearch":false,"includeNullMetadata":true,"instant":false,"legendFormat":"{{label_name}}","range":true,"refId":"A","useBackend":false}],"title":"Quantidade de status code","type":"timeseries"},{"datasource":{"type":"prometheus","uid":"${_datasource}"},"fieldConfig":{"defaults":{"color":{"mode":"continuous-GrYlRd","seriesBy":"max"},"custom":{"axisBorderShow":false,"axisCenteredZero":false,"axisColorMode":"text","axisLabel":"","axisPlacement":"right","barAlignment":0,"barWidthFactor":0.6,"drawStyle":"line","fillOpacity":0,"gradientMode":"none","hideFrom":{"legend":false,"tooltip":false,"viz":false},"insertNulls":false,"lineInterpolation":"smooth","lineStyle":{"fill":"solid"},"lineWidth":1,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"never","spanNulls":false,"stacking":{"group":"A","mode":"none"},"thresholdsStyle":{"mode":"off"}},"fieldMinMax":false,"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"red","value":1000}]},"unit":"opm"},"overrides":[]},"gridPos":{"h":7,"w":9,"x":8,"y":14},"id":1,"options":{"legend":{"calcs":["mean"],"displayMode":"table","placement":"bottom","showLegend":false,"sortBy":"Mean","sortDesc":true},"tooltip":{"mode":"multi","sort":"desc"}},"pluginVersion":"11.3.0+security-01","targets":[{"datasource":{"type":"prometheus","uid":"${_datasource}"},"disableTextWrap":false,"editorMode":"code","exemplar":false,"expr":"sum(increase(orki_core_script_execute_milliseconds_count{codeName=~\"${_codeName:regex}\"}[${_timeGroup}])) by (codeName)","fullMetaSearch":false,"includeNullMetadata":true,"instant":false,"legendFormat":"{{label_name}}","range":true,"refId":"A","useBackend":false}],"title":"Quantidade de chamadas nos scripts","type":"timeseries"},{"datasource":{"type":"prometheus","uid":"${_datasource}"},"fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisBorderShow":false,"axisCenteredZero":false,"axisColorMode":"text","axisLabel":"","axisPlacement":"auto","barAlignment":0,"barWidthFactor":0.6,"drawStyle":"line","fillOpacity":0,"gradientMode":"none","hideFrom":{"legend":false,"tooltip":false,"viz":false},"insertNulls":false,"lineInterpolation":"smooth","lineWidth":1,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"auto","spanNulls":false,"stacking":{"group":"A","mode":"none"},"thresholdsStyle":{"mode":"off"}},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"red","value":80}]},"unit":"cpm"},"overrides":[]},"gridPos":{"h":7,"w":7,"x":17,"y":14},"id":5,"options":{"legend":{"calcs":[],"displayMode":"list","placement":"bottom","showLegend":false},"tooltip":{"mode":"multi","sort":"desc"}},"pluginVersion":"11.3.0+security-01","targets":[{"datasource":{"type":"prometheus","uid":"${_datasource}"},"editorMode":"code","expr":"sum(increase(orki_core_script_execute_error_counter{codeName=~\"${_codeName:regex}\"}[${_timeGroup}])) by (codeName, errorCode)","legendFormat":"{{codeName}} ({{errorCode}})","range":true,"refId":"A"}],"title":"Taxa de erro por scripts","type":"timeseries"}],"preload":false,"refresh":"auto","schemaVersion":40,"tags":[],"templating":{"list":[{"current":{"text":"Prometheus","value":"PBFA97CFB590B2093"},"description":"","label":"Data source","name":"_datasource","options":[],"query":"prometheus","refresh":1,"regex":"","type":"datasource"},{"auto":false,"auto_count":30,"auto_min":"10s","current":{"text":"10m","value":"10m"},"description":"Intervalos","label":"Tempos","name":"_timeGroup","options":[{"selected":false,"text":"1m","value":"1m"},{"selected":true,"text":"10m","value":"10m"},{"selected":false,"text":"30m","value":"30m"},{"selected":false,"text":"1h","value":"1h"},{"selected":false,"text":"6h","value":"6h"},{"selected":false,"text":"12h","value":"12h"},{"selected":false,"text":"1d","value":"1d"},{"selected":false,"text":"7d","value":"7d"},{"selected":false,"text":"14d","value":"14d"},{"selected":false,"text":"30d","value":"30d"}],"query":"1m,10m,30m,1h,6h,12h,1d,7d,14d,30d","refresh":2,"type":"interval"},{"allValue":".*","current":{"text":["All"],"value":["$__all"]},"definition":"label_values(orki_core_script_execute_milliseconds_bucket,codeName)","includeAll":true,"label":"Scripts","multi":true,"name":"_codeName","options":[],"query":{"qryType":1,"query":"label_values(orki_core_script_execute_milliseconds_bucket,codeName)","refId":"PrometheusVariableQueryEditor-VariableQuery"},"refresh":1,"regex":"","type":"query"},{"allValue":".*","current":{"text":["All"],"value":["$__all"]},"definition":"label_values(orki_core_script_api_execute_milliseconds_count,statusCode)","includeAll":true,"label":"Status code","multi":true,"name":"_statusCode","options":[],"query":{"qryType":1,"query":"label_values(orki_core_script_api_execute_milliseconds_count,statusCode)","refId":"PrometheusVariableQueryEditor-VariableQuery"},"refresh":1,"regex":"","type":"query"}]},"time":{"from":"now-3h","to":"now"},"timepicker":{},"timezone":"browser","title":"Orki - Scripts","uid":"ae393g9ahzf28f","version":1,"weekStart":""}